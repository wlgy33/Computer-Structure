# 02 컴퓨터의 성능

컴퓨터의 속도나 효율성 등을 컴퓨터의 성능(Perfomance)이라고 한다. 이 절에서는 컴퓨터의 성능에 대한 정의 및 성능과 관련하여 중요한 암달의 법칙을 살펴본다.

### 1 성능의 정의
컴퓨터의 성능은 관점에 따라 다르다. 개인 사용자는 시스템의 **응답 시간(Response Time)**이나 작업 수행 시간에 민감하지만, 단체를 관리하는 운영자는 주어진 시간에 시스템이 처리하는 작업량을 나타내는 **처리율(Throughput)**이나 **대역폭(Bandwidth)**에 관심을 가진다.

응답 시간과 처리욜은 완전히 별개의 요소가 아니라, 일반적으로 하나를 향상하면 다른 것의 성능도 향상된다. 여기서는 응답 시간을 기준으로 살펴본다.

- **프로그램 응답 시간** : 하나의 프로그램을 처리하는 데 소요되는 시간

프로세서의 처리 시간 뿐만 아니라 운영체제애 대한 부담 등과 같은 불필요한 시간도 포함될 수 있다. 특히, **하나의 프로세서가 다수의 프로그램을 병행적으로 수행**하는 **시분할 시스템(Time Sharing System)**의 경우, 프로그램 응답 시간에 해당 프로그램 실행 시간뿐만 아니라 다른 프로그램의 실행 시간도 포함될 수 있다.

- **CPU 실행 시간(CPU Execution Time)** : 프로그램을 수행하는 데 순수하게 사용된 시간. 입출력/다른 프로그램의 실행 시간은 포함되지 않는다.
- **CPU 실행 시간(CPU Execution Time)** : 프로그램을 수행하는 데 순수하게 사용된 시간. 입출력/다른 프로그램의 실행 시간은 포함되지 않는다.
- 컴퓨터의 성능을 향상 == CPU 실행 시간을 줄인다.

$$ 성능 = \frac{1}{CPU 실행시간} $$

예를 들어 컴퓨터 $M_1$과 $M_2$의 성능을 비교할 때, 다음 문장은 모두 같은 의미이다.

- 컴퓨터 $M_2$는 컴퓨터 $M_1$보다 성능이 $n$배 좋다.
- 컴퓨터 $M_1$에 대해 컴퓨터 $M_2$의 성능 향상은 $n$이다.
- 컴퓨터 $M_1$에 대한 컴퓨터 $M_2$의 성능 비율(Performance Ratio)은 n이다.

성능 비율은 다음과 같은 식으로 나타낼 수 있다.

$$M_1에 대한 M_2의 성능 비율 = n = \frac{M_2의 성능}{M_1의 성능}$$

성능은 실행 시간에 반비례하므로 다음과 같이 정리할 수 있다.

$$M_1에 대한 M_2의 성능 비율 = n = \frac{M_1의 실행시간}{M_1의 실행시간}$$

### 2 암달의 법칙
암달의 법칙은 시스템의 일부분을 개선하는 경우 전체 시스템에서 얻을 수 있는 최대 성능 향상을 구할 때 사용한다. 암달의 법칙은 주로 병렬화에 의한 시스템 성능 향상의 한계를 지적하는 데 사용된다. 시스템 병렬화와 같은 방법으로 도모한 성능 향상은 시스템의 순차적 부분에 필요한 시간에 의해 제한된다. 즉, 시스템 일부의 기능을 아무리 향상하더라도 성능이 향상되지 않은 부분에 의해 전체 시스템의 성능이 제한된다는 것이다.

**상황 예시**
- 하나의 프로그램이 싱글코어 프로세서를 사용하면 20시간이 소요된다.
- 이 프로그램에서 1시간 소요되는 부분은 병렬화할 수 없고, 나머지 19시간이 소요되는 부분은 병렬화할 수 있다.
- 병렬화된 부분을 처리하는 데 사용되는 프로세서의 수에는 제한이 없다.

이와 같은 경우 많은 프로세서로 프로그램을 병렬로 처리하여 성능을 개선할 수 있다. 그러나 병렬화할 수 없는 부분인 1시간 분량은 순차적으로 처리해야 한다. 즉, 무한대의 프로세서를 이용할 경우 병렬 처리로 병렬화할 수 있는 부분에 소요되는 시간은 0으로 줄일 수 있지만, 순차적인 부분은 병렬화와 관계없이 1시간이 걸린다. 그러므로 아래 그림과 같이 병렬화에 의한 최대 성능 향상은 20배가 될 것이다.

![AmdahlsLaw](https://user-images.githubusercontent.com/52726195/111938080-8b6d5a00-8b0c-11eb-80f1-0700fc38ed8e.png)

- **$f$** : 시스템의 일부분
- **$n$** : 병렬화 혹은 하드웨어의 개선으로 개선된 성능의 배수
- **$(1-f)$** : 시스템의 나머지 부분
- **$M_1$** : 성능 향상 전의 기계
- **$M_2$** : 성능을 일부 향상한 기계
- **$s$** : 시스템의 전체 성능 향상. M_1에 대한 M_2의 성능 비율

$$s = \frac{M_2의 성능}{M_1의 성능}$$

$M_1$의 실행 시간을 $m$이라고 하면 $M_2$의 실행 시간은 다음과 같다.

$$M_2의\ 실행\ 시간 = M_1의\ 실행\ 시간  \ X\ \{{\frac{영향을\ 받는\ 부분}{성능\ 향상\ 크기}\ + \ 영향을\ 받지\ 않는\ 부분}\} \\ = m\{{\frac{f}{n}\ +\ (1-f)}\}$$

따라서 $M_1$에 비해 $M_2$의 시스템 전체 속도 향상 $s$는 다음과 같다.

$$s=\frac{M_2의\ 성능}{M_1의\ 성능}=\frac{M_1의\ 실행시간}{M_2의\ 실행시간}\\=\frac{m}{m\{\frac{f}{n}+(1-f)\}}\\=\frac{1}{\frac{f}{n}+(1-f)}$$

여기서 개선될 수 있는 부분에 대해 무한정으로 병렬화를 하거나 하드웨어를 무한정으로 투자한다면 시스템의 전체 속도 향상은 다음과 같이 된다.

$$\lim_{n \to \infty}s = \lim_{n \to \infty}\frac{1}{\frac{f}{n}+(1-f)}=\frac{1}{1-f}$$

결과적으로 시스템의 전체 성능 향상은 다음과 같이 표현할 수 있다.

$$s=\frac{1}{\frac{f}{n}+(1-f)}<=\frac{1}{1-f}$$

이는 시스템의 일부분을 아무리 개선하더라도 개선되지 않은 부분의 역수인 $$\frac{1}{1-f}$$보다 전체 시스템의 성능은 더 큰 속도 향상을 이룰 수 없다는 의미이다.

**결국 암달의 법칙은 병렬화 등의 방법으로 시스템 일부의 성능을 개선함으로써 최적의 성능을 얻는 것도 좋지만 성능이 개선되지 않는 부분을 최소하하는 것이 중요하다는 점을 시사한다.**




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    displayAlign: "center"
});
</script>
